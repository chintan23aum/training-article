<div class="row justify-content-center">
    <div class="col-md-4 col-md-offset-4">
        <form method="post">
            {{ form_start(form) }}

            <div class="form-group">
                {{ form_row(form.category,{'attr': {'class': 'form-control main_category article_category'}}) }}
            </div>
            <div id="subcategories">

            </div>
            <div class="form-group">
                {{ form_row(form.title, {'attr': {'class': 'form-control'}}) }}
            </div>
            <div class="form-group">
                {{ form_row(form.description, {'attr': {'class': 'form-control ckeditor'}}) }}
            </div>
            <div class="form-group">
                {{ form_row(form.tags, {'attr': {'class': 'form-control'}}) }}
            </div>

            <button type="submit" class="btn btn-outline-primary">Submit</button>
            <script>
                $(document).ready(function() {
                    ClassicEditor
                        .create(document.querySelector('.ckeditor'))
                        .catch(error => {
                            console.error(error);
                        });


                    var parentId = {{ category is not null? category.category.id|raw :0 }};
                    var dataCategory = {{ subCategory is not null ? subCategory|json_encode|raw : 'null' }};

                    if (dataCategory!=null && Object.keys(dataCategory).length > 0) {
                        // Iterate over the JSON data
                        for (var key in dataCategory) {
                            if (dataCategory.hasOwnProperty(key)) {
                                // Access each key-value pair
                                var value = dataCategory[key];
                                console.log('Key:', key, 'Value:', value);

                                getCategoryById(parentId,value);
                                parentId=value;
                            }
                        }
                    } else {
                        console.log('JSON data is empty.');
                    }
                });
            </script>
            {{ form_end(form) }}
        </form>
    </div>
</div>


